from telegram import Update
from telegram.ext import ContextTypes
from util import (send_text, load_prompt, send_image, send_text_buttons)
from menu_handler import start
from item_random import random_fact
from item_qpt import gpt_handler
from item_talk import talk_handler


# –û–∫—Ä–µ–º–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—ó –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
async def interpret_random_input(update: Update, context: ContextTypes.DEFAULT_TYPE):
    message_text = update.message.text.lower()

    if any(keyword in message_text for keyword in ['—Ñ–∞–∫—Ç', '—Ü—ñ–∫–∞–≤', 'random', '–≤–∏–ø–∞–¥–∫–æ–≤']):
        await send_text(update, context, "üß† –°—Ö–æ–∂–µ, –≤–∏ —Ü—ñ–∫–∞–≤–∏—Ç–µ—Å—å –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ —Ñ–∞–∫—Ç–∞–º–∏! –ó–∞—Ä–∞–∑ –ø–æ–∫–∞–∂—É –≤–∞–º –æ–¥–∏–Ω...")
        await random_fact(update, context)
        return True

    elif any(keyword in message_text for keyword in ['gpt', '—á–∞—Ç', '–ø–∏—Ç–∞–Ω–Ω—è', '–∑–∞–ø–∏—Ç–∞', '–¥—ñ–∑–Ω–∞—Ç–∏—Å—è']):
        await send_text(update, context, "ü§ñ –°—Ö–æ–∂–µ, —É –≤–∞—Å —î –ø–∏—Ç–∞–Ω–Ω—è! –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ —Ä–µ–∂–∏–º—É —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ ChatGPT...")
        await gpt_handler(update, context)
        return True

    elif any(keyword in message_text for keyword in ['—Ä–æ–∑–º–æ–≤', '–≥–æ–≤–æ—Ä–∏', '—Å–ø—ñ–ª–∫—É–≤–∞', '–æ—Å–æ–±–∏—Å—Ç', 'talk']):
        await send_text(update, context, "üë§ –°—Ö–æ–∂–µ, –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç–∏ –∑ –≤—ñ–¥–æ–º–æ—é –æ—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—é! –ó–∞—Ä–∞–∑ –ø–æ–∫–∞–∂—É –≤–∞–º –¥–æ—Å—Ç—É–ø–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏...")
        await talk_handler(update, context)
        return True

    return False

# –û–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫—É–º–µ–¥–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, –∫–æ–ª–∏ –Ω–∞–º—ñ—Ä –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ
async def show_funny_response(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ü–æ–∫–∞–∑—É—î –≤–∏–ø–∞–¥–∫–æ–≤—É –∫—É–º–µ–¥–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –∫–æ–ª–∏ –Ω–µ –≤–¥–∞—î—Ç—å—Å—è –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞–º—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞."""
    import random

    # –í–∏–ø–∞–¥–∫–æ–≤—ñ –∫—É–º–µ–¥–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —è–∫—â–æ –Ω–∞–º—ñ—Ä–∏ –Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ
    funny_responses = [
        "ü§î –•–º–º... –¶—ñ–∫–∞–≤–æ, –∞–ª–µ —è –Ω–µ –∑—Ä–æ–∑—É–º—ñ–≤, —â–æ —Å–∞–º–µ –≤–∏ —Ö–æ—á–µ—Ç–µ. –ú–æ–∂–µ —Å–ø—Ä–æ–±—É—î—Ç–µ –æ–¥–Ω—É –∑ –∫–æ–º–∞–Ω–¥ –∑ –º–µ–Ω—é?",
        "üßê –î—É–∂–µ —Ü—ñ–∫–∞–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è! –ê–ª–µ –º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —á—ñ—Ç–∫—ñ—à—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó. –û—Å—å –¥–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:",
        "üòÖ –û–π, –∑–¥–∞—î—Ç—å—Å—è, –≤–∏ –º–µ–Ω–µ –∑–∞—Å—Ç–∞–ª–∏ –∑–Ω–µ–Ω–∞—Ü—å–∫–∞! –Ø –≤–º—ñ—é –±–∞–≥–∞—Ç–æ —á–æ–≥–æ, –∞–ª–µ –º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:",
        "ü§ñ *–ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è* –í–∏–±–∞—á—Ç–µ, –º–æ—ó –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–ª–∏ —Ü–µ —è–∫ –∫–æ–º–∞–Ω–¥—É. –û—Å—å —â–æ —è —Ç–æ—á–Ω–æ –≤–º—ñ—é:",
        "ü¶Ñ –¶–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Ç–∞–∫–µ –∂ –∑–∞–≥–∞–¥–∫–æ–≤–µ, —è–∫ —î–¥–∏–Ω–æ—Ä—ñ–≥ —É –¥–∏–∫—ñ–π –ø—Ä–∏—Ä–æ–¥—ñ! –°–ø—Ä–æ–±—É–π—Ç–µ –æ–¥–Ω—É –∑ —Ü–∏—Ö –∫–æ–º–∞–Ω–¥:",
        "üïµÔ∏è –Ø –Ω–∞–º–∞–≥–∞—é—Å—è –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –≤–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è... –ê–ª–µ –∫—Ä–∞—â–µ —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—å –æ–¥–Ω—ñ—î—é –∑ –∫–æ–º–∞–Ω–¥:",
        "üé≤ –û! –í–∏–ø–∞–¥–∫–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è! –Ø —Ç–µ–∂ –≤–º—ñ—é –±—É—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º, –∞–ª–µ –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–∏:",
        "üì± *–Ω–∞—Ç–∏—Å–∫–∞—î —É—è–≤–Ω—ñ –∫–Ω–æ–ø–∫–∏* –ì–º, –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ. –ú–æ–∂–µ —Å–ø—Ä–æ–±—É—î–º–æ —Ü—ñ –∫–æ–º–∞–Ω–¥–∏?",
        "üåà –¶–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–µ, —è–∫ –≤–µ—Å–µ–ª–∫–∞! –ê–ª–µ –¥–ª—è –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ–≥–æ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è —Å–ø—Ä–æ–±—É–π—Ç–µ:",
        "ü§ì –ó–≥—ñ–¥–Ω–æ –∑ –º–æ—ó–º–∏ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∞–º–∏, —Ü–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∂–æ–¥–Ω—ñ–π –∑ –º–æ—ó—Ö –∫–æ–º–∞–Ω–¥. –û—Å—å –≤–æ–Ω–∏:",
    ]

    # –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–∑–∞—î–º–æ–¥—ñ—ó
    hints = [
        "–°–ø—Ä–æ–±—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /gpt, —â–æ–± –∑–∞–¥–∞—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è",
        "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ /random –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ü—ñ–∫–∞–≤–æ–≥–æ —Ñ–∞–∫—Ç—É",
        "–ö–æ–º–∞–Ω–¥–∞ /talk –¥–æ–∑–≤–æ–ª–∏—Ç—å –≤–∞–º –ø–æ—Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ –≤—ñ–¥–æ–º–æ—é –æ—Å–æ–±–∏—Å—Ç—ñ—Å—Ç—é",
        "–ù–µ –∑–Ω–∞—î—Ç–µ, —â–æ –æ–±—Ä–∞—Ç–∏? –ü–æ—á–Ω—ñ—Ç—å –∑ /start",
    ]

    # –§–æ—Ä–º—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∫—É–º–µ–¥–Ω–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–æ—é
    response = f"{random.choice(funny_responses)}\n\nüí° *–ü—ñ–¥–∫–∞–∑–∫–∞:* {random.choice(hints)}"
    await send_text(update, context, response)

    # –ü–æ–∫–∞–∑—É—î–º–æ –æ—Å–Ω–æ–≤–Ω–µ –º–µ–Ω—é
    await start(update, context)


